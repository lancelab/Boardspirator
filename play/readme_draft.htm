 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

 <html><head>
  <!-- doctype for html 4 is only to satisfy IE -->
  
  <meta name="copyright" content="2011 (c) Konstantin Kirillov">
  <meta name="description" content="Board Puzzle Framework"> 
  <meta name="keywords" content="board game, puzzle game, on line game, game development, educational game, sokoban"> 

  <title>Framework</title>
	<script type="text/javascript" src="tp/lib/jquery-1.7.js"></script>
	<script type="text/javascript" src="tp/bind_events.js"></script>
	<script type="text/javascript" src="tp/core.js"></script>
	<script type="text/javascript" src="tp/core_no_jquery.js"></script>
	<script type="text/javascript" src="tp/gui.js"></script>
	<script type="text/javascript" src="tp/form.js"></script>

	<!-- ** must be before others in gio: -->
	<script type="text/javascript" src="core/config.js"></script>
	<script type="text/javascript" src="core/config_gui.js"></script>

	<script type="text/javascript" src="core/entry.js"></script>

	<script type="text/javascript" >
		$.fn.tp$.gio.session.init.entry=function(){
			$.fn.tp$.core.rebuild_readme_html($.fn.tp$.gio.Description);
		};
	</script>

</head><body><div style="color:#666666; white-space:pre; font-family:monospace;">

Readme won't display if no JavaScript language enabled in your browser.
To display a readme, turn JavaScript on.

</div>


<div style="white-space:pre; font-family:monospace; visibility:hidden;">

You should run this readme from play/readme.htm

<a href="index.htm">#@Title@#</a> is a #@Description@# and is jQuery subplugin tp$.gio.
In other words, it is wrapped into a <a href="tp/readme.htm">jQuery plugin, tp</a>.
The files are spread via <a href=".">directory tree</a>, but can be assembled in one file.

Version:				#@Version@#
Date:					#@Date@#
License:				#@License@#
Copyright:				#@Copyright@#
Language:				#@Language@#
System Requirements:	#@SystemRequirements@#
WebSite:				<a href="http://#@WebSite@#">#@WebSite@#</a>
Contact:				#@Contact@#






D r a f t

<a name="game_definition_matrix"> </a>
Game definition matrix.
Defined in context of point in a map. Describes interaction of neighbour units.

  first-level interaction
	1. blocking policy:	block/pass
	2. blocking role:	blocks/passes
	3. interaction_matrix:	blocks,pushed (,swapped )
  second-level-post-interaction:
		mimics (, sticks, repells, ... )

Unit checked on interaction goes out of scope of further checks


Internal data representation (map) format:

	Before game is initialized, it takes map eigther from internal defaul text, or
	reads file from parent site.
	For example, for sokoban family maps, map is read and compiled into
	tiles_maps for each game_map.colonies[colony_ix].tiles_map

	Later, in file init.js, tile_map is converted to positions.
	(methods: gio.init_start_position, gio.compile_colony)
	Format of positions commented in gio.compile_colony.
    
	start_position does not have dom-elements. It is save to do a deep
	copy of start_position, which is done, for example, in creating
	a new round: r.pos=tp.core.tpaste([],gm.start_pos);

Licensing:
	If license for map is unknown, the framework provides link to external site map,
	and opportunity for user to copy-paste the map into the game.

</div>


</body></html>

